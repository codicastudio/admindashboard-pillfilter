!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";i.r(e);function s(t,e,i,s,o,n,r,h){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),s&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):o&&(c=h?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(t,e){return c.call(e),p(t,e)}}else{var a=l.beforeCreate;l.beforeCreate=a?[].concat(a,c):[c]}return{exports:t,options:l}}var o=s({name:"Pill",props:{active:{type:Boolean,required:!0}}},(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"rounded-lg form-control cursor-pointer dim text-sm p-2 px-4 mr-2 mt-2 select-none whitespace-no-wrap",class:{"bg-primary text-white":this.active,"bg-20":!this.active}},[this._t("default")],2)}),[],!1,null,null,null).exports;const n=t=>Math.max(t.offsetWidth,t.scrollWidth),r=t=>Math.max(t.offsetHeight,t.scrollHeight);class h{constructor(t={}){const e={content:t.viewport.children[0],direction:"all",pointerMode:"all",bounce:!0,friction:.05,bounceForce:.1,textSelection:!1,inputsFocus:!0,emulateScroll:!1,onClick(){},onUpdate(){},shouldScroll:()=>!0};this.props={...e,...t},this.props.viewport&&this.props.viewport instanceof Element?this.props.content?(this.viewport={width:this.props.viewport.clientWidth,height:this.props.viewport.clientHeight},this.content={width:n(this.props.content),height:r(this.props.content)},this.position={x:0,y:0},this.velocity={x:0,y:0},this.friction=1-this.props.friction,this.bounceForce=this.props.bounceForce,this.isDragging=!1,this.dragStartPosition={x:0,y:0},this.dragOffset={...this.dragStartPosition},this.dragPosition={...this.position},this.isTargetScroll=!1,this.targetPosition={x:0,y:0},this.isScrolling=!1,this.scrollOffset={x:0,y:0},this.bounce=this.props.bounce,this.textSelection=this.props.textSelection,this.boundX={from:Math.min(-this.content.width+this.viewport.width,0),to:0},this.boundY={from:Math.min(-this.content.height+this.viewport.height,0),to:0},this.isRunning=!1,this.rafID=null,this.events={},this.animate(),this.handleEvents()):console.error("ScrollBooster init error: Viewport does not have any content"):console.error('ScrollBooster init error: "viewport" config property must be present and must be Element')}run(){this.isRunning=!0,cancelAnimationFrame(this.rafID),this.rafID=requestAnimationFrame(()=>this.animate())}animate(){this.isRunning&&(this.update(),this.props.onUpdate(this.getState()),this.rafID=requestAnimationFrame(()=>this.animate()))}isMoving(){return this.isDragging||this.isScrolling||Math.abs(this.velocity.x)>=.1||Math.abs(this.velocity.y)>=.1}update(){this.applyBoundForce(),this.applyDragForce(),this.applyScrollForce(),this.applyTargetForce(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,"vertical"!==this.props.direction&&(this.position.x+=this.velocity.x),"horizontal"!==this.props.direction&&(this.position.y+=this.velocity.y),this.bounce&&!this.isScrolling||this.isTargetScroll||(this.position.x=Math.max(Math.min(this.position.x,this.boundX.to),this.boundX.from),this.position.y=Math.max(Math.min(this.position.y,this.boundY.to),this.boundY.from)),this.isMoving()||(this.isRunning=!1,this.isTargetScroll=!1)}applyForce(t){this.velocity.x+=t.x,this.velocity.y+=t.y}applyBoundForce(){if(!this.bounce||this.isDragging)return;const t=this.position.x<this.boundX.from,e=this.position.x>this.boundX.to,i=this.position.y<this.boundY.from,s=this.position.y>this.boundY.to,o=t||e,n=i||s;if(!o&&!n)return;const r=t?this.boundX.from:this.boundX.to,h=i?this.boundY.from:this.boundY.to,c=r-this.position.x,l=h-this.position.y,p={x:c*this.bounceForce,y:l*this.bounceForce},a=this.position.x+(this.velocity.x+p.x)/(1-this.friction),u=this.position.y+(this.velocity.y+p.y)/(1-this.friction);(t&&a>=this.boundX.from||e&&a<=this.boundX.to)&&(p.x=c*this.bounceForce-this.velocity.x),(i&&u>=this.boundY.from||s&&u<=this.boundY.to)&&(p.y=l*this.bounceForce-this.velocity.y),this.applyForce({x:o?p.x:0,y:n?p.y:0})}applyDragForce(){if(!this.isDragging)return;const t=this.dragPosition.x-this.position.x,e=this.dragPosition.y-this.position.y,i={x:t-this.velocity.x,y:e-this.velocity.y};this.applyForce(i)}applyScrollForce(){if(!this.isScrolling)return;const t={x:this.scrollOffset.x-this.velocity.x,y:this.scrollOffset.y-this.velocity.y};this.scrollOffset.x=0,this.scrollOffset.y=0,this.applyForce(t)}applyTargetForce(){if(!this.isTargetScroll)return;const t={x:.08*(this.targetPosition.x-this.position.x)-this.velocity.x,y:.08*(this.targetPosition.y-this.position.y)-this.velocity.y};this.applyForce(t)}scrollTo(t={}){this.isTargetScroll=!0,this.targetPosition.x=-t.x||0,this.targetPosition.y=-t.y||0,this.run()}setPosition(t={}){this.velocity.x=0,this.velocity.y=0,this.position.x=-t.x||0,this.position.y=-t.y||0,this.run()}getState(){return{isMoving:this.isMoving(),isDragging:!(!this.dragOffset.x&&!this.dragOffset.y),position:{x:-this.position.x,y:-this.position.y},dragOffset:this.dragOffset}}updateMetrics(){this.viewport.width=this.props.viewport.clientWidth,this.viewport.height=this.props.viewport.clientHeight,this.content.width=n(this.props.content),this.content.height=r(this.props.content),this.boundX.from=Math.min(-this.content.width+this.viewport.width,0),this.boundY.from=Math.min(-this.content.height+this.viewport.height,0),this.run()}handleEvents(){const t={x:0,y:0};let e=null,i=!1;const s=e=>{if(!this.isDragging)return;const s=i?e.touches[0].pageX:e.pageX,o=i?e.touches[0].pageY:e.pageY;this.dragOffset.x=s-t.x,this.dragOffset.y=o-t.y,this.dragPosition.x=this.dragStartPosition.x+this.dragOffset.x,this.dragPosition.y=this.dragStartPosition.y+this.dragOffset.y};this.events.pointerdown=e=>{i=!(!e.touches||!e.touches[0]);const o=i?e.touches[0]:e,{pageX:n,pageY:r,clientX:h,clientY:c}=o,{viewport:l}=this.props,p=l.getBoundingClientRect();if(h-p.left>=l.clientLeft+l.clientWidth)return;if(c-p.top>=l.clientTop+l.clientHeight)return;if(!this.props.shouldScroll(this.getState(),e))return;if("mouse"===this.props.pointerMode&&i)return;if("touch"===this.props.pointerMode&&!i)return;if(!(this.props.inputsFocus&&["input","textarea","button","select","label"].indexOf(e.target.nodeName.toLowerCase())>-1)){if(this.textSelection){if(((t,e,i)=>{const s=t.childNodes,o=document.createRange();for(let t=0;t<s.length;t++){const n=s[t];if(3!==n.nodeType)continue;o.selectNodeContents(n);const r=o.getBoundingClientRect();if(e>=r.left&&i>=r.top&&e<=r.right&&i<=r.bottom)return n}return!1})(e.target,h,c))return;(()=>{const t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty())})()}this.isDragging=!0,t.x=n,t.y=r,this.dragStartPosition.x=this.position.x,this.dragStartPosition.y=this.position.y,s(e),this.run(),e.preventDefault()}},this.events.pointermove=t=>{s(t)},this.events.pointerup=()=>{this.isDragging=!1},this.events.wheel=t=>{this.props.emulateScroll&&(this.velocity.x=0,this.velocity.y=0,this.isScrolling=!0,this.scrollOffset.x=-t.deltaX,this.scrollOffset.y=-t.deltaY,this.run(),clearTimeout(e),e=setTimeout(()=>this.isScrolling=!1,80),t.preventDefault())},this.events.scroll=()=>{const{scrollLeft:t,scrollTop:e}=this.props.viewport;Math.abs(this.position.x+t)>3&&(this.position.x=-t,this.velocity.x=0),Math.abs(this.position.y+e)>3&&(this.position.y=-e,this.velocity.y=0)},this.events.click=t=>this.props.onClick(this.getState(),t),this.events.contentLoad=()=>this.updateMetrics(),this.events.resize=()=>this.updateMetrics(),this.props.viewport.addEventListener("mousedown",this.events.pointerdown),this.props.viewport.addEventListener("touchstart",this.events.pointerdown),this.props.viewport.addEventListener("click",this.events.click),this.props.viewport.addEventListener("wheel",this.events.wheel),this.props.viewport.addEventListener("scroll",this.events.scroll),this.props.content.addEventListener("load",this.events.contentLoad,!0),window.addEventListener("mousemove",this.events.pointermove),window.addEventListener("touchmove",this.events.pointermove),window.addEventListener("mouseup",this.events.pointerup),window.addEventListener("touchend",this.events.pointerup),window.addEventListener("resize",this.events.resize)}updateOptions(t={}){this.props={...this.props,...t},this.props.onUpdate(this.getState()),this.run()}destroy(){this.props.viewport.removeEventListener("mousedown",this.events.pointerdown),this.props.viewport.removeEventListener("touchstart",this.events.pointerdown),this.props.viewport.removeEventListener("click",this.events.click),this.props.viewport.removeEventListener("wheel",this.events.wheel),this.props.viewport.removeEventListener("scroll",this.events.scroll),this.props.content.removeEventListener("load",this.events.contentLoad),window.removeEventListener("mousemove",this.events.pointermove),window.removeEventListener("touchmove",this.events.pointermove),window.removeEventListener("mouseup",this.events.pointerup),window.removeEventListener("touchend",this.events.pointerup),window.removeEventListener("resize",this.events.resize)}}var c=s({name:"PillFilter",components:{Pill:o},props:{resourceName:{type:String,required:!0},filterKey:{type:String,required:!0}},mounted:function(){var t=this;if("drag"===this.filter.mode){var e=new h({viewport:this.$refs.viewport,direction:"horizontal",emulateScroll:!0,textSelection:!0,onUpdate:function(e){t.$refs.content.style.transform="translateX(".concat(-e.position.x,"px)")}});this.$on("beforeDestroy",(function(){return e.destroy()}))}},methods:{setFilter:function(t){this.$store.commit("".concat(this.resourceName,"/updateFilterState"),{filterClass:this.filterKey,value:t}),this.$emit("change")},clearFilters:function(){this.setFilter([])},enableFilter:function(t){if(this.filter.single)return this.setFilter([t]);this.currentActive.includes(t)?this.currentActive.splice(this.currentActive.indexOf(t),1):this.currentActive.push(t),this.setFilter(this.currentActive)}},computed:{filter:function(){return this.$store.getters["".concat(this.resourceName,"/getFilter")](this.filterKey)},currentActive:function(){return this.filter.currentValue||[]}}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"viewport",staticClass:"overflow-hidden pill-filter"},[i("div",[i("h3",{staticClass:"text-sm uppercase tracking-wide text-80 bg-30 p-3"},[t._v("\n            "+t._s(t.filter.name)+"\n        ")]),t._v(" "),i("div",{ref:"content",staticClass:"flex px-2 pb-2",class:{"flex-wrap":"wrap"===t.filter.mode}},[t.filter.showSelectNoneButton?i("Pill",{attrs:{active:0===t.currentActive.length},nativeOn:{click:function(e){return t.clearFilters()}}},[t._v("\n\n                "+t._s(t.filter.noneLabel)+"\n\n            ")]):t._e(),t._v(" "),t._l(t.filter.options,(function(e){return i("Pill",{key:e.value,attrs:{active:t.currentActive.includes(e.value)},nativeOn:{click:function(i){return t.enableFilter(e.value)}}},[t._v("\n\n                "+t._s(e.name)+"\n\n            ")])}))],2)])])}),[],!1,null,null,null).exports;Nova.booting((function(t,e,i){t.component("pill-filter",c)}))}]);